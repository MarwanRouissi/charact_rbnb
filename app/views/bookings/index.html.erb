<div class="container bg-white flex-grow-1 my-4">
<div class="mt-4 mx-4 w-100">
  <h2 class="text-color-custom mb-2">Your bookings</h2>

  <div class="d-flex booking-card-gap m-3 flex-wrap">
    <% @user_bookings.each do |booking| %>

      <%= link_to character_path(booking.character), class: 'text-decoration-none' do %>
      <div class="booking-card p-2">

        <div>
          <% if booking.character.photo.attached?%>
            <%= cl_image_tag booking.character.photo.key, class: 'booking-card-img' %>
          <% elsif booking.character.url_image.present? %>
            <%= image_tag booking.character.url_image, class: 'booking-card-img' %>
          <% else %>
            <%= image_tag "image.png", class: 'booking-card-img' %>
          <% end %>
        </div>

        <div>
          <div class="booking-card-inside">
            <span class="booking-character-text"><%= booking.character.name %></span>
          </div>
          <div class="booking-card-inside text-black">
            <span><%= booking.start_date %> /
            <br>
            <%= booking.end_date %></span>
          </div>
          <div class="booking-card-inside">
            <% if booking.book_status == true %>
              <i class="fa-solid fa-check booking-accepted-color"></i>
            <% elsif booking.book_status == false %>
              <i class="fa-solid fa-xmark booking-decined-color"></i>
            <% else %>
              <i class="fa-solid fa-hourglass-half booking-pending-color"></i>
            <% end %>
          </div>
        </div>
      </div>
      <% end %>

    <% end %>
  </div>
</div>

<div class="mt-4 mx-4 w-100">
  <h2 class="text-color-custom">Booking requests for your characters</h2>

  <div class="d-flex booking-card-gap m-3 flex-wrap">
    <% @bookings_to_review.each do |booking| %>
      <div data-controller="booking-status-select" class="booking-position-relative">
        <%= link_to character_path(booking.character), class: 'text-decoration-none' do %>
          <div class="booking-card p-2">

          <div>
            <% if booking.character.photo.attached?%>
              <%= cl_image_tag booking.character.photo.key, class: 'booking-card-img' %>
            <% elsif booking.character.url_image.present? %>
              <%= image_tag booking.character.url_image, class: 'booking-card-img' %>
            <% else %>
            <%= image_tag "image.png", class: 'booking-card-img' %>
            <% end %>
          </div>

            <div>
              <div class="booking-card-inside booking-character-text">
                <span><%= booking.character.name %></span>
              </div>
              <div class="booking-card-inside text-black">
                <span><%= booking.user.email %></span>
              </div>
              <div class="booking-card-inside text-black">
                <span><%= booking.start_date %> /
                <br>
                <%= booking.end_date %></span>
              </div>
        <% end %>
              <div class="booking-card-inside" data-action="click->booking-status-select#display">
                <p>
                  <% case booking.book_status %>
                    <% when true %>
                      <i class="fa-solid fa-check booking-accepted-color"></i>
                    <% when false %>
                      <i class="fa-solid fa-xmark booking-decined-color"></i>
                    <% when nil %>
                      <i class="fa-solid fa-hourglass-half booking-pending-color"></i>
                  <% end %>
                </p>
              </div>

            </div>
          </div>


        <% if booking.book_status.nil? %>
            <div class="mt-3 booking-status-position d-none" data-booking-status-select-target="selectList">
              <%= simple_form_for booking do |f| %>
                <%= f.input_field :book_status, collection: %i[pending accepted declined], prompt: booking.book_status %>
                <%# <%= f.button :submit, class: 'btn btn-custom ms-2' %>
              <% end %>
            </div>
        <% end %>
      </div>

    <% end %>
  </div>
  </div>
</div>
